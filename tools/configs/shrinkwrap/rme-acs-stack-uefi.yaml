## @file
 # Copyright (c) 2025, Arm Limited or its affiliates. All rights reserved.
 # SPDX-License-Identifier : Apache-2.0
 #
 # Licensed under the Apache License, Version 2.0 (the "License");
 # you may not use this file except in compliance with the License.
 # You may obtain a copy of the License at
 #
 #  http://www.apache.org/licenses/LICENSE-2.0
 #
 # Unless required by applicable law or agreed to in writing, software
 # distributed under the License is distributed on an "AS IS" BASIS,
 # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 # See the License for the specific language governing permissions and
 # limitations under the License.
 ##

%YAML 1.2
---
description: >-
  This config brings together TF-A, TF-RMM, EDK-2 and UEFI Application of RME-ACS
  for Base FVP platform.

layers:
  - edk2-base.yaml
  - rme-acs-stack-base.yaml
  - rme-mec.yaml

build:
  tfa:
    params:
      BL33: ${artifact:EDK2}

run:
  rtvars:
    BL1:
      type: path
      value: ${artifact:BL1}

    FIP:
      type: path
      value: ${artifact:FIP}

    ROOTFS:
      type: path
      value: ''

  params:
    -C bp.secureflashloader.fname: ${rtvar:BL1}
    -C bp.flashloader0.fname: ${rtvar:FIP}
    -C bp.virtioblockdevice.image_path: ${rtvar:ROOTFS}
    -C bp.pl011_uart0.shutdown_tag: "\"RME tests complete. Reset the system.\""

  terminals:
    bp.terminal_0:
      type: stdinout
      logfile: fvp_log.0
    bp.terminal_1:
      friendly: edk2
      logfile: fvp_log.1
    bp.terminal_3:
      friendly: rmm
      logfile: fvp_log.3

